---
import { sanityClient } from "sanity:client";
import imageUrlBuilder from '@sanity/image-url'
import '../styles/index.css'
import '../styles/iframe.css'
const builder = imageUrlBuilder(sanityClient)
  
function urlFor(source) {
        if( source === undefined ){
          return null
        } else return builder.image(source)
      
    }


export async function getStaticPaths() {

      const builder = imageUrlBuilder(sanityClient)
        
     function urlFor(source){
              if(source === undefined ){
                return null
              } else return builder.image(source)
            
          }

  const posts = await sanityClient.fetch(`*[_type == "posts"]`);
  
  
  return posts.map(({ slug, href}) => {
    
    

    
  


   
    return {
      params: { slug: slug.current },
      props: { href },
    };
  });


}


const { href } = Astro.props;



const { slug } = Astro.params;



function loadedSlug(){
  if(!slug){
    console.error('Something went wrong')
  }
  else console.log('loaded!');
  
}
loadedSlug()




---
<script is:inline src="/windowListener.js"></script>

<iframe class="iframeClass" id="iframeClass" src={href} frameborder="0"></iframe>